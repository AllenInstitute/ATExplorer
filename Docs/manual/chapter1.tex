\chapterimage{chapterimage_1.jpg} % Chapter heading image

\chapter{Overview of the \ate{} UI and API}
\section{Introduction}\index{Introduction}

\doublespacing
This chapter gives an overview of the software application that is named \emph{ATExplorer}.

The \ate application was designed and implemented due to an emerging need to allow \emph{non-programmers} to process, manage and explore \at data on a routine basis.

Depending on the actual protocols, an \at data set can range in size from a few hundred megabytes, to very large, like several Terra bytes.  Depending on the number of stains and sessions, the complexity of the data-sets range from trivial to complex.

One of the main challenges in \at is the precise digital reconstruction of an original volume, i.e. from individually cut and imaged slices of tissue.

However, before volume reconstruction can begin, various pre data processing algorithms need to be applied, such as median filtering, flat-field correction and de-convolution. These processing algorithms are all, to some extent, complex. \ate provides the non-programmer user with intuitive and easy to use UI components to guide through this process, in order to quickly get to data that is useful for scientific discovery and exploration.

\section{A manual \at workflow}
In order to get from raw acquired data to fine aligned 3D volumes, a number of processing steps, i.e. a \emph{pipeline}, is required. (Create a pipeline figure)

\begin{description}[font=$\bullet$~\normalfont\scshape\color{red!50!black}]
\item [FlatField correction]
\item [Deconvolution]
\item [Stitching]
\item [Registration]
\item [Rough aligning] 
\item [Fine aligning] 
\item [Other]
\end{description}

The pipeline is integrated into the \ate UI. However, in certain situations it may be necessary to push data through the pipeline manually. \ate provides a set of 
Python scripts that can be used for this purpose. The scripts are to be found in the folder \path{/atPipeline/source} and \path{/atPipeline}. These pipeline scripts can be executed on their own, or from within the UI.

Each pipeline script is discussed in terms of their purpose, input and output data, in the sections below.

\subsection{Creation of Renderstacks from raw image data}
The first step in order to get easy and useful access to raw data is to create \emph{stacks} in Render. A stack, in this context, can be thought of as an object in the Render backend that that keep positional and orientational information about a set of imaged section tiles. 

However, before this data can be populated, a set of files, \emph{statetables}, need to be created using the python script \emph{createStateTables.py}. 
A statetable file contain meta data for individual section, by session.

\subsubsection{The script: \emph{create\_state\_tables.py}}
\singlespacing

\lstset{basicstyle=\tiny,style=mypython}

\inputpython{\pipeline/source/create_state_tables.py}{7}{45} 

Input: Dataroot folder and ribbons, sessions

Output: state table files in folder: \emph{scripts} 

\subsubsection{The script: \emph{create\_rawdata\_render\_multi\_stacks.py}}
Creates down-sampled images and tile specs...

\singlespacing
\inputpython{\pipeline/source/create_rawdata_render_multi_stacks.py}{9}{50} 

Input: Dataroot folder and ribbons, sessions

Output: Renderstacks in render: ACQ\_ 

\subsection{Creation of median files}
\subsubsection{The script: \emph{create\_median\_files.py}}
\inputpython{\pipeline/source/create_median_files.py}{9}{38} 
Input: 

Output: 
\subsubsection{The script: \emph{create\_flatfield\_corrected\_data.py}}
\inputpython{\pipeline/source/create_flatfield_corrected_data.py}{9}{41} 

\clearpage
\doublespacing

\begin{figure}[h]
\centering\includegraphics[scale=0.65]{LMDataProcessing_1}

\caption{Processing ..........}
\end{figure}

\section{The Render Service}

\clearpage

\section{The \ate UI}

\begin{figure}[h]
\centering\includegraphics[scale=0.85]{ATExplorerUI_1}

\caption{\ate{} UI. The circled numbers in the figure indicate relevant elements of the UI; \protect\cn{1} Project(s) TreeView. \protect\cn{2} Tabbed Project Item View. \protect\cn{3} Information and Application Log Messages.}
\end{figure}

\subsection{Importing Data}

\begin{description}[font=$\bullet$~\normalfont\scshape\color{red!50!black}]
\item [Importing process] Give an overview on what happens when data is being imported to \ate.
\item [Data Formats] Describe the Allen Institute format, and Kristinas format.
\end{description}

\subsection{Connect to a a Remote (or local) RenderHost}

\subsection{Create of RenderStacks}

\subsection{Manage Stacks in Render}

\subsection{Explore Data}

\section{Python Bindings}